
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>🏠 고정지출 관리</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; margin: 20px; background: #f5f5f5; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    input[type="text"], input[type="number"] { width: 95%; padding: 6px; }
    .section { margin-top: 30px; }
    #totalAmount { margin-top: 10px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>🏠 고정지출 관리</h2>
  <table>
    <thead>
      <tr><th>항목 이름</th><th>금액</th><th>용도</th></tr>
    </thead>
    <tbody id="fixedRows"></tbody>
  </table>
  <button onclick="saveFixed()">💾 저장</button>
  <p id="totalAmount">총 고정지출: 0원</p>
  <button onclick="location.href='calculator.html'">← 메인으로 돌아가기</button>

  <script>
    const tbody = document.getElementById("fixedRows");
    for (let i = 0; i < 15; i++) {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td><input type="text" class="name" /></td>
        <td><input type="number" class="amount" /></td>
        <td><input type="text" class="desc" /></td>
      `;
      tbody.appendChild(row);
    }

    function saveFixed() {
      const names = document.querySelectorAll(".name");
      const amounts = document.querySelectorAll(".amount");
      const descs = document.querySelectorAll(".desc");
      const data = [];

      let total = 0;

      for (let i = 0; i < names.length; i++) {
        const name = names[i].value.trim();
        const amt = parseInt(amounts[i].value) || 0;
        const desc = descs[i].value.trim();
        if (name || amt || desc) {
          data.push({ name, amount: amt, desc });
          total += amt;
        }
      }

      localStorage.setItem("fixedExpenses", JSON.stringify(data));
      document.getElementById("totalAmount").textContent = "총 고정지출: " + total.toLocaleString() + "원";
      alert("고정지출이 저장되었습니다!");
    }

    // 저장된 값 불러오기
    const saved = JSON.parse(localStorage.getItem("fixedExpenses") || "[]");
    if (saved.length > 0) {
      const names = document.querySelectorAll(".name");
      const amounts = document.querySelectorAll(".amount");
      const descs = document.querySelectorAll(".desc");
      saved.forEach((item, idx) => {
        if (idx < names.length) {
          names[idx].value = item.name;
          amounts[idx].value = item.amount;
          descs[idx].value = item.desc;
        }
      });
      const total = saved.reduce((sum, cur) => sum + cur.amount, 0);
      document.getElementById("totalAmount").textContent = "총 고정지출: " + total.toLocaleString() + "원";
    }
  </script>
</body>
</html>
